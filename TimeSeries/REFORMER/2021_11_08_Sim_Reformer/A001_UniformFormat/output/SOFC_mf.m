function [y1] = SOFC_mf(x1)
%SOFC_MF neural network simulation function.
%
% Auto-generated by MATLAB, 23-Feb-2022 15:44:13.
% 
% [y1] = SOFC_mf(x1) takes these arguments:
%   x = 10xQ matrix, input #1
% and returns:
%   y = 3xQ matrix, output #1
% where Q is the number of samples.

%#ok<*RPMT0>

% ===== NEURAL NETWORK CONSTANTS =====

% Input 1
x1_step1.xoffset = [-1.96974355974109;-0.935180088748558;-0.933653759425345;-1.67198897570093;-0.944790438675621;-0.941946032097539;-0.981196091883325;-1.74378579789124;-2.0119442699734;-1.6298971379559];
x1_step1.gain = [0.675254142410398;0.759750849352487;0.771347632571659;0.620409973533232;0.833143165470275;0.814660562610461;0.999868562217865;0.440132719082264;0.476278554477626;0.405463663794656];
x1_step1.ymin = -1;

% Layer 1
b1 = [-1.5838648496248899367;1.9570842971645503461;0.7566955521279482566;1.0066801566791905298;-0.54322476668060748484;0.053865689994181543965;-1.3380307137187934519;-1.3041279126433698021;-2.5873305596839726306;2.0671480075209198723];
IW1_1 = [0.54650330731681495688 -0.80752396256248926143 -1.1833660178422640286 0.85930089738844617209 -0.3274345340750741129 0.04591782850859662396 -0.54157551195347231054 -0.37244955047481131949 -0.86358484677002034235 0.087203339759146167309;0.016412406599166495108 0.18138283719807116179 0.3816403115211994268 0.71320229426135728357 -1.3479988362513672939 -0.30394013173337897094 -0.64621781907661168809 0.91793113442013374303 -0.65043821527860623544 -0.47461958041526425278;0.69494270776404620804 -0.36298339369810606048 -1.4314863229224819019 -2.0261002812114070615 -0.18239064590734821447 -0.18186007400760467734 0.25944921065072834576 0.76360878919490937644 -1.5385970098875265677 0.41724142626125726441;-2.2127797743292014765 -1.9006971142356647864 1.6843232900142526276 -0.070049215044632129334 0.6307107181727977796 -1.0786472493334136047 1.1328738700804290573 -2.8086791359169600568 4.2424332786191945033 0.14030374138326626166;-0.21303529256378525569 -0.0017611250322441835553 0.27138051402495361186 -0.24625867325867514812 -0.81623946192583352044 0.3034846335936177697 -0.14814176681263874213 -0.025684509580515237775 0.15357677596912203133 0.12234184449109711257;-0.45408100172941823214 -1.1062644901048652724 -1.0033138993667571892 -1.018476276756343335 -0.14396112134176231034 0.69991618679603684328 -0.5413727265804162414 0.067175938507071375483 0.43128397740450552522 -0.2743595504836703336;-2.1337237771583024148 -0.82994986941749937515 0.71404277535358040563 -0.48445024798544583655 0.17603239771285375537 -1.0500795593243286152 0.26996649316478960046 1.90127577820881144 -2.1839105659530058112 -0.28420768066760604409;-0.28646289153445197995 -0.033860585561953662759 1.1579603705905250344 -0.51107506462405050129 -0.30323548828004842637 -1.0415191171876565512 1.1742950709437458556 2.0178604835896898351 -2.4115164183235160422 -0.42764674357994486575;-0.88944923044123958 0.06109873190981519181 0.42169616534743531444 1.2891968591543443434 -1.2472329923977454325 -0.76445390270076030159 -0.26369164799694350121 4.2525968656833548209 -0.5464714276344070365 -0.44622791282444523864;-0.062440005599892350885 -0.49100532785966005678 0.21777551693667113186 -2.1257225668100030447 -0.13367051543264932278 -0.75584571344387585512 0.25168994120762205879 -2.4318981999904645264 -1.0544587675308911834 1.1028472736556651501];

% Layer 2
b2 = [2.3147721887325083401;-1.0478201552814832009;1.0000812719140754758;2.1256942355545520584;1.3753514734917202667;0.96131437532616059727];
LW2_1 = [-2.4468578780908933901 0.80302323591652247092 -1.4275141957634027712 -1.8923716964078705072 -1.0853034532308774018 -0.42340622516113685103 0.49064388038191303343 0.18364866021335987667 -1.1735988083224091483 -0.37975267934959783256;0.02143685822731019458 0.33729790975626744443 -1.1819822695173156646 0.70098593393360597581 1.268166307710142604 -1.7064680188409055983 1.5824736488815926982 -0.99005246531261037468 -0.37825252889370186704 0.91305110930026756044;-0.066932920070971513304 0.44574735929194225781 0.67866284175721691696 -0.006187684143711788716 1.7672945737473795269 -1.1094688833243364634 0.43150265318705544049 -0.50243736251469661713 0.0038093240103749203239 0.011770994631114766252;0.43192035508639237129 0.35318957398411920945 -1.2644623805203705214 -0.22118351038734893055 -0.6859542279375188123 -0.061162343345853027732 1.4532472633407349516 -2.509774625934934722 -1.4132837865770246921 -0.58575238549627184348;1.0673049610430453138e-05 2.2509341545866310419 -0.15491284154002241125 0.45960797880499182355 -2.6322545079991939154 -3.5228574439986424238 0.37850802304055736203 -0.57652484697353034715 1.8701925117231985585 0.9709898481068367504;-0.80186888210992790516 -0.88502599806258697157 -0.35363676453700249036 -1.1592915882727790056 1.4835806307099828061 0.91518443687164907629 0.38741719869161939105 -0.42261240466596694532 -1.1548744447726733142 -0.56589911550527682849];

% Layer 3
b3 = [1.723891753243395053;0.31188249525651945415;0.88234928396036871323];
LW3_2 = [-1.6624039210558398949 1.5435171773651659155 -3.4600559090147395835 -1.9507886734648964833 4.1501731121621636689 4.4299960823631501228;-0.0835003317678260637 0.17657975178636156621 0.92889403793688729571 -0.070263554213997228559 0.17252339618640238905 0.20361736266781363391;0.28735360321191566468 -0.33713850749493295966 1.3279539665671658 0.29833346919426351196 -2.2091740754491877574 -1.531366051791472227];

% Layer 4
b4 = [0.82947100968152975842;0.94317304772918542088;-0.20678923203390497942];
LW4_3 = [0.99446426795748388283 -3.3071376187571055461 1.1374632945623477376;-2.4270792891060533059 -0.90239689429493008532 -3.8262843868744136344;-1.1277661613672074203 2.1792840154658783547 -2.9450083780658053989];

% Output 1
y1_step1.ymin = -1;
y1_step1.gain = [0.362983763086034;0.446723515180531;0.438615868438193];
y1_step1.xoffset = [-2.01500943485642;-1.55470320974627;-2.02158510075495];

% ===== SIMULATION ========

% Dimensions
Q = size(x1,2); % samples

% Input 1
xp1 = mapminmax_apply(x1,x1_step1);

% Layer 1
a1 = tansig_apply(repmat(b1,1,Q) + IW1_1*xp1);

% Layer 2
a2 = tansig_apply(repmat(b2,1,Q) + LW2_1*a1);

% Layer 3
a3 = tansig_apply(repmat(b3,1,Q) + LW3_2*a2);

% Layer 4
a4 = repmat(b4,1,Q) + LW4_3*a3;

% Output 1
y1 = mapminmax_reverse(a4,y1_step1);
end

% ===== MODULE FUNCTIONS ========

% Map Minimum and Maximum Input Processing Function
function y = mapminmax_apply(x,settings)
  y = bsxfun(@minus,x,settings.xoffset);
  y = bsxfun(@times,y,settings.gain);
  y = bsxfun(@plus,y,settings.ymin);
end

% Sigmoid Symmetric Transfer Function
function a = tansig_apply(n,~)
  a = 2 ./ (1 + exp(-2*n)) - 1;
end

% Map Minimum and Maximum Output Reverse-Processing Function
function x = mapminmax_reverse(y,settings)
  x = bsxfun(@minus,y,settings.ymin);
  x = bsxfun(@rdivide,x,settings.gain);
  x = bsxfun(@plus,x,settings.xoffset);
end
